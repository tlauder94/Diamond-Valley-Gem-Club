<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diamond Valley Gem Club</title>
  <link rel="stylesheet" href="home.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap">
</head>

<body>

  <header id="navbar-container"></header>

  <section id="hero">
  <div class="hero-container">
    <div class="hero-images">
      <div class="hero-image hero-image-left">
        <img src="images/home1.jpg" alt="Faceting" />
      </div>
      <div class="hero-image hero-image-right">
        <img src="images/home3.jpg" alt="Cabs" />
      </div>
    </div>
    <div class="hero-text">
      <h1>Welcome to the Diamond Valley Gem Club</h1>
      <p>
        Our club fosters the interests of people who are interested in the collecting, cutting, and polishing
        of gemstones, lapidary work, and all associated arts, crafts, and activities.
      </p>
    </div>
  </div>
</section>

<section id="annoucement">
  <div class="annoucement-banner" style="display: none;">
    <button class="close-button" onclick="document.querySelector('.annoucement-banner').style.display='none';">&times;</button>
    <h1 id="annoucement-header"></h1>
    <p id="annoucement-text"></p>
  </div>
</section>

<section id="home-opening">
  <div class="opening-hours-container">
    <section class="contact-section">
      <h2 class="section-heading">Club Opening Times</h2>
      <div class="opening-hours-cards">
        <div class="opening-hours-card" data-day="1">
          <h3>Monday</h3>
          <p>7:30pm - 9:30pm</p>
        </div>
        <div class="opening-hours-card" data-day="2">
          <h3>Tuesday</h3>
          <p>10:30am - 3:00pm</p>
          <p>7:30pm - 9:30pm</p>
        </div>
        <div class="opening-hours-card" data-day="3">
          <h3>Wednesday</h3>
          <p>10:30am - 3:00pm</p>
        </div>
        <div class="opening-hours-card" data-day="4">
          <h3>Thursday</h3>
          <p>7:30pm - 10:00pm</p>
        </div>
        <div class="opening-hours-card" data-day="5">
          <h3>Friday</h3>
          <p>Closed</p>
        </div>
        <div class="opening-hours-card" data-day="6">
          <h3>Saturday</h3>
          <p>10:30am - 4:00pm</p>
        </div>
        <div class="opening-hours-card" data-day="0">
          <h3>Sunday</h3>
          <p>Closed</p>
        </div>
      </div>
    </section>
  </div>
</section>

<section id="home-about">
  <div class="home-about-container">
    <div class="home-about-text">
      <h1>About Us</h1>
      <p>
        At the Diamond Valley Gem Club, we're all about digging deeper — literally and figuratively. Founded by a passionate group of rockhounds and lapidary enthusiasts, our club offers a welcoming space for anyone fascinated by gems, minerals, fossils, and the art of shaping them into stunning works. Whether you're a beginner who can barely tell quartz from granite or a seasoned facetor who dreams in perfect symmetry, you'll find workshops, equipment, and expert guidance to help you level up your skills. We run regular classes in cutting, cabbing, faceting, silversmithing, and jewellery making, because rocks deserve a good polish and a great setting.
      </p>
      <p>
        But it’s not all about the grind (pun absolutely intended). We're a social bunch too — offering field trips, competitions, gem shows, and community events where you can swap stories, stones, and a fair bit of friendly banter. Whether you’re here to learn, create, compete, or just marvel at the Earth's sparkliest treasures, Diamond Valley Gem Club offers a vibrant, down-to-earth community ready to welcome you. Grab a chisel, grab a cuppa — let’s rock.
      </p>
      <button class="home-about-button">
        <a href="about.html">Find Out More...</a>
      </button>
    </div>
    <div class="home-about-image-container">
      <img src="images/history1.jpg" alt="Diamond Valley Gem Club" class="about-image" />
    </div>
  </div>
</section>

<div class="page-break-course"></div> <!-- Page break moved here -->

<section id="home-course">
  <div class="home-course-container">
    <div class="home-course-text">
      <h1>Courses</h1>
    </div>
    <div id="home-course-grid" class="home-course-grid">
      <div class="home-course-card">
        <img src=" " alt="Course Image" class="course-image">
        <h2>Course Title</h2>
        <p>Course description goes here. It should be concise and informative.</p>
        <a href="course-details.html" class="course-button">More Details</a>
      </div>
      <!-- More dynamically added cards -->
    </div>
    <div class="view-all-courses-button-container">
      <a href="courses.html" class="home-all-courses-button">View All Courses</a>
    </div>
  </div>
</section>

<section id="home-upcoming-events">
  <div class="page-break"></div>
  <h2>Upcoming Events</h2>
  <div id="upcoming-events-container" class="upcoming-events-grid">
    <!-- Events will be dynamically loaded here -->
  </div>
  <div class="see-all-events-button-container">
    <a href="calendar.html" class="see-all-events-button">See All Events</a>
  </div>
  <div class="page-break"></div>
</section>

  <section id="home-history">
    <div class="home-history-container">
        <div class="home-history-text">
          <h1>Club History</h1>
          <p>In October 1967 the Diamond Valley Gem club was officially formed. That year there were ten gem clubs formed in Victoria and we were one of them. 
            The club emerged from humble beginnings with workshops being held at a member’s home using limited equipment.</p>
          <button class="home-history-button"><a href="about.html#club-history-text">Read more...  </a></button>
        </div>
        <div class="home-history-image-container">
        <img src="images/aboutus.jpg" alt="Diamond Valley Gem Club History" class="history-image" /> 
        </div>       
    </div>
  </section>



<footer id="footer-container"></footer>

<script>
// Dynamically load the shared navbar
    document.addEventListener('DOMContentLoaded', () => {
      fetch('navbar.html') // Ensure the file path is correct
        .then(response => {
          if (!response.ok) {
            throw new Error(`Failed to load navbar. Status: ${response.status}`);
          }
          return response.text();
        })
        .then(data => {
          document.querySelector('header').innerHTML = data;
        })
        .catch(error => {
          console.error('Error loading navbar:', error);
          document.querySelector('header').innerHTML = '<p style="color: red;">Failed to load navbar. Please try again later.</p>';
        });
    });
    
  // Dynamically load the shared footer
      document.addEventListener('DOMContentLoaded', () => {
        fetch('footer.html') // Ensure the file path is correct
          .then(response => {
            if (!response.ok) {
              throw new Error(`Failed to load footer. Status: ${response.status}`);
            }
            return response.text();
          })
          .then(data => {
            document.querySelector('footer').innerHTML = data;
          })
          .catch(error => {
            console.error('Error loading footer:', error);
            document.querySelector('footer').innerHTML = '<p style="color: red;">Failed to load navbar. Please try again later.</p>';
          });
      });
  </script>
  


  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const today = new Date().getDay(); // Get the current day (0 = Sunday, 1 = Monday, etc.)
      const cards = document.querySelectorAll('.opening-hours-card');
  
      cards.forEach(card => {
        if (parseInt(card.getAttribute('data-day')) === today) {
          card.classList.add('highlight'); // Add the highlight class to today's card
        }
      });
    });
  </script>

<script>
  document.addEventListener('DOMContentLoaded', () => {

  // Array of random images from the /images folder
  const images = [
    "images/cabochon.png",
    "images/cabs.jpg",
    "images/faceting.png",
    "images/silversmith.png",
  ];

  const container = document.getElementById('upcoming-events-container');
  container.innerHTML = ''; // Clear any existing content

  // Loop through events and create event cards
  events.forEach(event => {
    const randomImage = images[Math.floor(Math.random() * images.length)]; // Pick a random image

    // Create the event card
    const eventCard = document.createElement('div');
    eventCard.classList.add('event-card');

    // Add the image container
    const eventCardImage = document.createElement('div');
    eventCardImage.classList.add('event-card-image');
    const img = document.createElement('img');
    img.src = randomImage;
    img.alt = event.title;
    eventCardImage.appendChild(img);

    // Add the content container
    const eventCardContent = document.createElement('div');
    eventCardContent.classList.add('event-card-content');

    // Add the event info
    const eventInfo = document.createElement('div');
    eventInfo.classList.add('event-info');
    eventInfo.innerHTML = `
      <h3>${event.title}</h3>
      <p><strong>Date:</strong> ${event.date}</p>
      <p><strong>Time:</strong> ${event.time}</p>
      <p><strong>Location:</strong> ${event.location}</p>
    `;

    // Add the "Add to Calendar" button
    const addToCalendarButton = document.createElement('button');
    addToCalendarButton.classList.add('add-to-calendar-button');
    addToCalendarButton.textContent = "Add to Calendar";
    addToCalendarButton.onclick = () => {
      const calendarUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(
        event.title
      )}&dates=${encodeURIComponent(event.date)}&details=${encodeURIComponent(
        `Time: ${event.time}\nLocation: ${event.location}`
      )}`;
      window.open(calendarUrl, '_blank');
    };

    // Append everything to the event card
    eventCardContent.appendChild(eventInfo);
    eventCardContent.appendChild(addToCalendarButton);
    eventCard.appendChild(eventCardImage);
    eventCard.appendChild(eventCardContent);
    container.appendChild(eventCard);
  });
});

document.addEventListener('DOMContentLoaded', () => {
  const announcementUrl = 'https://script.google.com/macros/s/AKfycby5-Sv7WigXltzCjVL_EtgQjYYyH2_rMpGx8HAsu93Pe8vjwn1LxX6NrvJl3fM61WuQ/exec?sheet=Announcement';

  fetch(announcementUrl)
    .then(res => {
      if (!res.ok) {
        throw new Error(`HTTP error! Status: ${res.status}`);
      }
      return res.json();
    })
    .then((data) => {
      console.log('API Data:', data); // Log the data returned by the API
      if (data.length > 0) {
        const announcement = data[0];
        document.getElementById('annoucement-header').textContent = announcement.title || 'Announcement';
        document.getElementById('annoucement-text').textContent = announcement.message || 'No message provided.';
        document.querySelector('.annoucement-banner').style.display = 'block';
      } else {
        console.log('No announcements to display.'); // Log if no announcements are returned
        document.querySelector('.annoucement-banner').style.display = 'none';
      }
    })
    .catch(error => {
      console.error('Error fetching announcement:', error); // Log any errors
      document.querySelector('.annoucement-banner').style.display = 'none';
    });
});

document.addEventListener('DOMContentLoaded', () => {
  const upcomingEventsContainer = document.getElementById('upcoming-events-container');

  // Fetch events from the calendar API
  const eventsApiUrl = 'https://script.google.com/macros/s/AKfycby5-Sv7WigXltzCjVL_EtgQjYYyH2_rMpGx8HAsu93Pe8vjwn1LxX6NrvJl3fM61WuQ/exec?sheet=Events';

  fetch(eventsApiUrl)
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      return response.json();
    })
    .then(data => {
      console.log('Fetched Events:', data);

      // Clear any existing content
      upcomingEventsContainer.innerHTML = '';

      // Get today's date
      const today = new Date();

      // Filter out past events
      const upcomingEvents = data.filter(event => {
        const [day, month, year] = event.date.split('-');
        const eventDate = new Date(`${year}-${month}-${day}`);
        return eventDate >= today; // Include only events on or after today
      });

      // Sort events by date (ascending order)
      upcomingEvents.sort((a, b) => {
        const [dayA, monthA, yearA] = a.date.split('-');
        const [dayB, monthB, yearB] = b.date.split('-');
        const dateA = new Date(`${yearA}-${monthA}-${dayA}`);
        const dateB = new Date(`${yearB}-${monthB}-${dayB}`);
        return dateA - dateB;
      });

      // Limit to the next 3 events
      const nextThreeEvents = upcomingEvents.slice(0, 3);

      // Loop through the events and create cards
      nextThreeEvents.forEach(event => {
        // Convert date from DD-MM-YYYY to a readable format
        const [day, month, year] = event.date.split('-');
        const formattedDate = `${day} ${new Date(`${year}-${month}-${day}`).toLocaleString('default', { month: 'long' })}, ${year}`;

        // Format start and end times
        const formattedStartTime = formatTime(event.startTime);
        const formattedEndTime = formatTime(event.endTime);

        // Assign an image based on event type
        let image = '';
        switch (event.type) {
          case 'Working Bee':
          image = "images/workingbee.jpg";
          break;
        case 'Field Trip':
          image = "images/fieldtrip.jpg";
          break;
        case 'Committee Meeting':
          image = "images/committee.jpg";
          break;
        case 'Social Event':
          image = "images/social.jpg";
          break;
        case 'AGM':
          image = "images/committee.jpeg";
          break;
        case 'Other Event':
          image = "images/otherevent.jpg";
          break;
        case 'Gem Show':
          image = "images/gemshow.jpg";
          break;
        case 'Gem Identification':
          image = "images/gemid.jpg";
          break;
        default:
          image = "images/default-event.png";
      }

        // Create the event card
        const eventCard = document.createElement('div');
        eventCard.classList.add('event-card');

        // Add the image container
        const eventCardImage = document.createElement('div');
        eventCardImage.classList.add('event-card-image');
        const img = document.createElement('img');
        img.src = image;
        img.alt = event.title;
        eventCardImage.appendChild(img);

        // Add the content container
        const eventCardContent = document.createElement('div');
        eventCardContent.classList.add('event-card-content');

        // Add the event info
        const eventInfo = document.createElement('div');
        eventInfo.classList.add('event-info');
        eventInfo.innerHTML = `
          <h3>${event.title}</h3>
          <p><strong>Date:</strong> ${formattedDate}</p>
          <p><strong>Time:</strong> ${formattedStartTime} - ${formattedEndTime}</p>
          <p><strong>Location:</strong> ${event.location || 'No location specified'}</p>
          <p><strong>Who Can Attend:</strong> ${event.openTo || 'Open to everyone'}</p>
        `;

        // Add the "Add to Calendar" button
        const addToCalendarButton = document.createElement('button');
        addToCalendarButton.classList.add('add-to-calendar-button');
        addToCalendarButton.textContent = "Add to Calendar";
        addToCalendarButton.onclick = () => {
          const calendarUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(
            event.title
          )}&dates=${encodeURIComponent(event.date)}&details=${encodeURIComponent(
            `Time: ${formattedStartTime} - ${formattedEndTime}\nLocation: ${event.location}\nWho Can Attend: ${event.openTo}`
          )}`;
          window.open(calendarUrl, '_blank');
        };

        // Append everything to the event card
        eventCardContent.appendChild(eventInfo);
        eventCardContent.appendChild(addToCalendarButton);
        eventCard.appendChild(eventCardImage);
        eventCard.appendChild(eventCardContent);
        upcomingEventsContainer.appendChild(eventCard);
      });
    })
    .catch(error => {
      console.error('Error fetching events:', error);
      upcomingEventsContainer.innerHTML = '<p>Failed to load upcoming events. Please try again later.</p>';
    });

  // Function to format time to 12-hour format with AM/PM
  function formatTime(time) {
    const timeString = String(time).padStart(4, '0'); // Ensure 4-digit format
    const hours = parseInt(timeString.slice(0, 2), 10);
    const minutes = timeString.slice(2, 4);
    const period = hours >= 12 ? 'PM' : 'AM';
    const formattedHours = hours % 12 || 12; // Convert to 12-hour format
    return `${formattedHours}:${minutes}${period}`;
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const courseGrid = document.getElementById('home-course-grid');

  // Fetch the courses.html file
  fetch('courses.html')
    .then(response => {
      if (!response.ok) {
        throw new Error(`Failed to load courses. Status: ${response.status}`);
      }
      return response.text();
    })
    .then(html => {
      // Parse the HTML content
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');

      // Select all course cards
      const courseCards = Array.from(doc.querySelectorAll('.course-card'));

      // Randomly select 3 courses
      const shuffledCourses = courseCards.sort(() => 0.5 - Math.random());
      const selectedCourses = shuffledCourses.slice(0, 3);

      // Clear the course grid
      courseGrid.innerHTML = '';

      // Append the selected courses to the home page
      selectedCourses.forEach(courseCard => {
        // Create a new card element
        const card = document.createElement('div');
        card.classList.add('home-course-card');

        // Extract the image, title, description, and link from the original course card
        const imageElement = courseCard.querySelector('img');
        if (imageElement) {
          imageElement.classList.add('course-image'); // Ensure the class is applied
        }
        const image = imageElement?.outerHTML || '';
        const title = courseCard.querySelector('h2')?.outerHTML || '';
        const description = courseCard.querySelector('p')?.outerHTML || '';
        const link = courseCard.querySelector('a.course-button')?.outerHTML || '';

        // Build the card's inner HTML
        card.innerHTML = `
          ${image}
          ${title}
          ${description}
          ${link}
        `;

        // Append the card to the grid
        courseGrid.appendChild(card);
      });
    })
    .catch(error => {
      console.error('Error fetching courses:', error);
      courseGrid.innerHTML = '<p>Failed to load courses. Please try again later.</p>';
    });
});
</script>
</body>

</html>
