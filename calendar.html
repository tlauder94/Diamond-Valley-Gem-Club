<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendar & Events</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/calendar.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
</head>
<body>
  <!-- Navbar -->
  <header id="navbar-container"></header>

  <!-- Banner Section -->
  <section class="banner">
    <div class="banner-content">
      <h1>Calendar & Events</h1>
    </div>
  </section>

  <!-- About Section -->
  <section class="about-section container">
  <div class="about-wrapper">
    <div class="about-text">
      <h2>About Our Calendar</h2>
      <p>Our calendar showcases all the exciting events and courses happening at the Diamond Valley Gem Club. Stay up-to-date with upcoming workshops, community events, and special gatherings. Whether you're a beginner or an experienced enthusiast, there's something for everyone!</p>
    </div>
    <div class="about-image">
      <img src="/images/cabs.jpg" alt="Calendar and Events" class="responsive-image">
    </div>
  </div>
</section>

  <!-- Calendar Section -->
  <section class="calendar-section container">
    <div id="calendar"></div>
  </section>

  <!-- Upcoming Events Section -->
  <section class="upcoming-events container">
  <h2>Upcoming Events</h2>
  <div id="upcoming-events-container"></div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth', // Default to month view
      headerToolbar: {
        left: 'prev,next today', // Navigation buttons
        center: 'title',
        right: 'dayGridMonth,timeGridWeek' // Allow only month and week views
      },
      showNonCurrentDates: true, // Ensure overflow days are shown to complete the week
      fixedWeekCount: false, // Remove the extra row at the bottom of the calendar
      events: [
        {
          title: 'Faceting Masterclass',
          start: '2025-06-15T10:00:00',
          end: '2025-06-15T14:00:00',
          description: 'Learn the precision art of gemstone faceting in this advanced-level class.',
          image: '/images/faceting.png'
        },
        {
          title: 'Cabochon Machine Workshop',
          start: '2025-06-22T13:00:00',
          end: '2025-06-22T17:00:00',
          description: 'Hands-on training with cabochon machines for beginners and enthusiasts.',
          image: '/images/cabmachine.jpg'
        },
        {
          title: 'Cabochon Polishing Techniques',
          start: '2025-06-29T15:00:00',
          end: '2025-06-29T18:00:00',
          description: 'Master the art of cabochon polishing with expert guidance.',
          image: '/images/cabochon.png'
        }
      ]
    });

    calendar.render();

    // Dynamically populate the Upcoming Events section
    const events = calendar.getEvents();
    const upcomingEventsContainer = document.getElementById('upcoming-events-container');

    events.forEach(event => {
      const eventDate = new Date(event.start);
      const month = eventDate.toLocaleString('default', { month: 'long' });
      const day = eventDate.getDate();

      const eventHTML = `
        <div class="event">
          <div class="event-date">
            <div class="event-month">${month}</div>
            <div class="event-day">${day}</div>
          </div>
          <img src="${event.extendedProps.image}" alt="${event.title}" class="event-image">
          <div class="event-details">
            <h3>${event.title}</h3>
            <p>${event.extendedProps.description}</p>
            <a href="#" class="add-to-calendar-button">Add to Calendar</a>
          </div>
        </div>
        <div class="divider"></div>
      `;

      upcomingEventsContainer.innerHTML += eventHTML;
    });
  });
</script>

  <!-- Footer -->
  <footer id="footer-container"></footer>

  <script>
    // Dynamically load the shared navbar
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/navbar.html')
        .then(response => response.text())
        .then(data => {
          document.querySelector('header').innerHTML = data;
        })
        .catch(error => console.error('Error loading navbar:', error));
    });

    // Dynamically load the shared footer
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/footer.html')
        .then(response => response.text())
        .then(data => {
          document.querySelector('footer').innerHTML = data;
        })
        .catch(error => console.error('Error loading footer:', error));
    });
  </script>
</body>
</html>